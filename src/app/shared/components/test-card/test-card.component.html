<div class="test-card d-flex flex-column h-100">
  <div>
    <a [routerLink]="['/', baseService.currentLanguage, 'test', test.id]">
      <img
        role="button"
        class="wm-card-img"
        [src]="imageUrl + test.image"
        [alt]="test.nameEn"
      />
    </a>
  </div>

  <div class="wm-card-divider"></div>
  <div
    class="card-content mt-1 d-flex justify-content-between align-items-center"
  >
    <div class="">
      <p class="wm-title mb-1">
        {{ baseService.currentLanguage == "ar" ? test.nameAr : test.nameEn }}
      </p>
      <p class="wm-price mb-1">{{ test.price }} {{ "SAR" | translate }}</p>
    </div>

    <div class="wm-card-buttons">
      <button
        aria-label="AddToCart"
        (click)="cartServices.addToCart(test.id, ProductType.Test)"
        class="circle-primary"
      >
        <svg
          width="12"
          height="11"
          viewBox="0 0 12 11"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0.84375 0.25L1.72266 0.25C2.15234 0.25 2.54297 0.503906 2.71875 0.875L10.7461 0.875C11.2539 0.875 11.625 1.36328 11.4883 1.87109L10.6875 4.83984C10.5312 5.46484 9.96484 5.875 9.33984 5.875L3.69531 5.875L3.8125 6.44141C3.85156 6.65625 4.04687 6.8125 4.26172 6.8125L9.90625 6.8125C10.1602 6.8125 10.375 7.02734 10.375 7.28125C10.375 7.55469 10.1602 7.75 9.90625 7.75L4.26172 7.75C3.59766 7.75 3.01172 7.28125 2.89453 6.61719L1.87891 1.32422C1.85937 1.24609 1.80078 1.1875 1.72266 1.1875H0.84375C0.570312 1.1875 0.375 0.992187 0.375 0.71875C0.375 0.464844 0.570312 0.25 0.84375 0.25ZM2.93359 1.8125L3.51953 4.9375L9.33984 4.9375C9.55469 4.9375 9.73047 4.80078 9.78906 4.60547L10.5312 1.8125L2.93359 1.8125ZM3.8125 10.25C3.46094 10.25 3.16797 10.0742 2.99219 9.78125C2.81641 9.50781 2.81641 9.13672 2.99219 8.84375C3.16797 8.57031 3.46094 8.375 3.8125 8.375C4.14453 8.375 4.4375 8.57031 4.61328 8.84375C4.78906 9.13672 4.78906 9.50781 4.61328 9.78125C4.4375 10.0742 4.14453 10.25 3.8125 10.25ZM10.375 9.3125C10.375 9.66406 10.1797 9.95703 9.90625 10.1328C9.61328 10.3086 9.24219 10.3086 8.96875 10.1328C8.67578 9.95703 8.5 9.66406 8.5 9.3125C8.5 8.98047 8.67578 8.6875 8.96875 8.51172C9.24219 8.33594 9.61328 8.33594 9.90625 8.51172C10.1797 8.6875 10.375 8.98047 10.375 9.3125Z"
            fill="#E6FBF3"
          />
        </svg>
      </button>

      <button
        aria-label="AddToWishlist"
        (click)="
          isTestInWishList() ? removeTestFromWishList() : addTestToWishList()
        "
        [disabled]="isTestInWishList() == null"
        [ngClass]="
          isTestInWishList() == true ? 'circle-success' : 'circle-primary-light'
        "
      >
        @if( isTestInWishList() == null){
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
          <radialGradient
            id="a12"
            cx=".66"
            fx=".66"
            cy=".3125"
            fy=".3125"
            gradientTransform="scale(1.5)"
          >
            <stop offset="0" stop-color="#663190"></stop>
            <stop offset=".3" stop-color="#663190" stop-opacity=".9"></stop>
            <stop offset=".6" stop-color="#663190" stop-opacity=".6"></stop>
            <stop offset=".8" stop-color="#663190" stop-opacity=".3"></stop>
            <stop offset="1" stop-color="#663190" stop-opacity="0"></stop>
          </radialGradient>
          <circle
            transform-origin="center"
            fill="none"
            stroke="url(#a12)"
            stroke-width="15"
            stroke-linecap="round"
            stroke-dasharray="200 1000"
            stroke-dashoffset="0"
            cx="100"
            cy="100"
            r="70"
          >
            <animateTransform
              type="rotate"
              attributeName="transform"
              calcMode="spline"
              dur="2"
              values="360;0"
              keyTimes="0;1"
              keySplines="0 0 1 1"
              repeatCount="indefinite"
            ></animateTransform>
          </circle>
          <circle
            transform-origin="center"
            fill="none"
            opacity=".2"
            stroke="#663190"
            stroke-width="15"
            stroke-linecap="round"
            cx="100"
            cy="100"
            r="70"
          ></circle>
        </svg>
        } @else{ @if(isTestInWishList()){
        <svg
          width="10"
          height="10"
          viewBox="0 0 10 10"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0.917969 6.12891C0.332031 5.58203 -1.37073e-07 4.80078 -1.30756e-07 3.98047L-1.30004e-07 3.88281C-1.19476e-07 2.51562 0.976562 1.34375 2.32422 1.12891C3.22266 0.972656 4.12109 1.26562 4.76562 1.89062L5 2.125L5.23437 1.89062C5.85937 1.26562 6.77734 0.972656 7.65625 1.12891C9.00391 1.34375 10 2.51562 10 3.88281L10 3.98047C10 4.80078 9.64844 5.58203 9.0625 6.12891L5.52734 9.42969C5.39062 9.56641 5.19531 9.625 5 9.625C4.78516 9.625 4.58984 9.56641 4.45312 9.42969L0.917969 6.12891Z"
            fill="#663190"
          />
        </svg>

        } @else {
        <svg
          width="10"
          height="10"
          viewBox="0 0 17 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7.4707 15.1973L7.4043 15.0977L1.59375 9.71875C0.564453 8.75586 0 7.42773 0 6.0332V5.93359C0 3.60938 1.66016 1.58398 3.95117 1.15234C5.24609 0.886719 6.57422 1.18555 7.66992 1.94922C7.96875 2.14844 8.23437 2.41406 8.5 2.67969C8.63281 2.54687 8.76562 2.38086 8.93164 2.24805C9.06445 2.14844 9.19727 2.04883 9.33008 1.94922C10.3926 1.18555 11.7207 0.886719 13.0156 1.15234C15.3398 1.58398 17 3.60937 17 5.93359V6.0332C17 7.42773 16.4023 8.75586 15.373 9.71875L9.5625 15.0977L9.49609 15.1973C9.23047 15.4297 8.86523 15.5957 8.5 15.5957C8.10156 15.5957 7.76953 15.4297 7.4707 15.1973ZM7.93555 4.43945C7.90234 4.43945 7.90234 4.43945 7.90234 4.40625L7.30469 3.74219C6.54102 2.87891 5.37891 2.51367 4.25 2.71289C2.68945 3.01172 1.59375 4.37305 1.59375 5.93359V6.0332C1.59375 6.99609 1.95898 7.89258 2.65625 8.52344L8.5 13.9355L14.3105 8.52344C15.0078 7.89258 15.4062 6.99609 15.4062 6.0332V5.93359C15.4062 4.37305 14.2773 3.01172 12.7168 2.71289C11.5879 2.51367 10.4258 2.87891 9.66211 3.74219L9.06445 4.40625C9.06445 4.43945 9.06445 4.43945 9.03125 4.47266C8.89844 4.60547 8.69922 4.70508 8.5 4.70508C8.26758 4.70508 8.06836 4.60547 7.93555 4.47266Z"
            fill="#663190"
          />
        </svg>

        } }
      </button>
    </div>
  </div>
</div>
